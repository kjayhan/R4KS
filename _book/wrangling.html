<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>R for Korean Studies: A Gentle Introduction to Computational Social Science - 5&nbsp; Data Wrangling</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./visuals-tables.html" rel="next">
<link href="./basics.html" rel="prev">
<link href="./r4ks Logo square 512.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-6J6HBMRCFK"></script><script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-6J6HBMRCFK', { 'anonymize_ip': true});
</script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./wrangling.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data Wrangling</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R for Korean Studies: A Gentle Introduction to Computational Social Science</a> 
        <div class="sidebar-tools-main">
    <a href="https://www.github.com/kjayhan/R4KS" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./setup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Setting Up</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Korean Studies Data Sources</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">The Basics of R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data Wrangling</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visuals-tables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Data Visualization: Tables</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visuals-plots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data Visualization: Plots</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visuals-maps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Data Visualization: Maps</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./text.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Korean Text Analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Statistical Analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Storytelling with Quarto</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./productivity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Productivity Tools</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./api.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Working with API to get Korean Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kdiplo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Making Korean Data Visualization Social</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bootcamp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">R for Korean Studies Bootcamps</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#selecting-columns" id="toc-selecting-columns" class="nav-link active" data-scroll-target="#selecting-columns"><span class="header-section-number">5.1</span> Selecting columns</a></li>
  <li><a href="#filtering-rows" id="toc-filtering-rows" class="nav-link" data-scroll-target="#filtering-rows"><span class="header-section-number">5.2</span> Filtering rows</a></li>
  <li><a href="#arranging-rows" id="toc-arranging-rows" class="nav-link" data-scroll-target="#arranging-rows"><span class="header-section-number">5.3</span> Arranging rows</a></li>
  <li><a href="#mutating-columns" id="toc-mutating-columns" class="nav-link" data-scroll-target="#mutating-columns"><span class="header-section-number">5.4</span> Mutating columns</a></li>
  <li><a href="#grouping-and-summarizing-data" id="toc-grouping-and-summarizing-data" class="nav-link" data-scroll-target="#grouping-and-summarizing-data"><span class="header-section-number">5.5</span> Grouping and summarizing data</a></li>
  <li><a href="#conditional-mutating" id="toc-conditional-mutating" class="nav-link" data-scroll-target="#conditional-mutating"><span class="header-section-number">5.6</span> Conditional Mutating</a></li>
  <li>
<a href="#merging-datasets" id="toc-merging-datasets" class="nav-link" data-scroll-target="#merging-datasets"><span class="header-section-number">5.7</span> Merging datasets</a>
  <ul class="collapse">
<li><a href="#inner_join" id="toc-inner_join" class="nav-link" data-scroll-target="#inner_join"><span class="header-section-number">5.7.1</span> inner_join</a></li>
  <li><a href="#left_join" id="toc-left_join" class="nav-link" data-scroll-target="#left_join"><span class="header-section-number">5.7.2</span> left_join</a></li>
  <li><a href="#right_join" id="toc-right_join" class="nav-link" data-scroll-target="#right_join"><span class="header-section-number">5.7.3</span> right_join</a></li>
  <li><a href="#full_join" id="toc-full_join" class="nav-link" data-scroll-target="#full_join"><span class="header-section-number">5.7.4</span> full_join</a></li>
  <li><a href="#anti_join" id="toc-anti_join" class="nav-link" data-scroll-target="#anti_join"><span class="header-section-number">5.7.5</span> anti_join</a></li>
  </ul>
</li>
  <li><a href="#a-note-on-country-codes" id="toc-a-note-on-country-codes" class="nav-link" data-scroll-target="#a-note-on-country-codes"><span class="header-section-number">5.8</span> A Note on Country Codes</a></li>
  <li>
<a href="#a-note-on-working-with-korean-country-nameswrangling-1" id="toc-a-note-on-working-with-korean-country-nameswrangling-1" class="nav-link" data-scroll-target="#a-note-on-working-with-korean-country-nameswrangling-1"><span class="header-section-number">5.9</span> A Note on Working with Korean Country Names</a>
  <ul class="collapse">
<li><a href="#converting-wide-data-to-long-format" id="toc-converting-wide-data-to-long-format" class="nav-link" data-scroll-target="#converting-wide-data-to-long-format"><span class="header-section-number">5.9.1</span> Converting wide data to long format</a></li>
  <li><a href="#iso3c_kr-function-to-convert-korean-country-names-to-iso3c-country-codes" id="toc-iso3c_kr-function-to-convert-korean-country-names-to-iso3c-country-codes" class="nav-link" data-scroll-target="#iso3c_kr-function-to-convert-korean-country-names-to-iso3c-country-codes"><span class="header-section-number">5.9.2</span> <code>iso3c_kr</code> function to convert Korean country names to iso3c country codes</a></li>
  </ul>
</li>
  <li><a href="#working-with-dates" id="toc-working-with-dates" class="nav-link" data-scroll-target="#working-with-dates"><span class="header-section-number">5.10</span> Working with dates</a></li>
  <li><a href="#regular-expressions" id="toc-regular-expressions" class="nav-link" data-scroll-target="#regular-expressions"><span class="header-section-number">5.11</span> Regular expressions</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">
<span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data Wrangling</span>
</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><p>In this chapter, we will learn how to wrangle data mainly using the <code>dplyr</code> package. We will learn how to select, filter, arrange, mutate, group, and summarize data. We will learn how to join data from different sources, working with dates, and converting data to long and wide formats.</p>
<p>As an example for this chapter, we will use Korea’s trade data, <a href="https://kdiplo.com/reference/trade_data"><code>trade_data</code></a>, from the <a href="https://github.com/kjayhan/kdiplo/"><code>kdiplo</code></a> package. Let’s install the package. You can install the development version from GitHub with:</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># install.packages("devtools") # if you haven't installed the devtools package yet, remove the # sign.</span></span>
<span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"kjayhan/kdiplo"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s load the libraries and the data.</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span> <span class="co"># load the tidyverse package which includes dplyr, ggplot2, tidyr, readr, purrr, and tibble and more.</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/kjayhan/kdiplo">kdiplo</a></span><span class="op">)</span> <span class="co"># load the kdiplo package</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s take a quick look at the data.</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">trade_data</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 18
  iso3c country  year export import total_export total_import export_kosis
  &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;
1 ABW   Aruba    1965     NA     NA    175082000    463442000           NA
2 ABW   Aruba    1966     NA     NA    250334000    716441000           NA
3 ABW   Aruba    1967     NA     NA    320229000    996246000           NA
4 ABW   Aruba    1968     NA     NA    455400000   1462873000           NA
5 ABW   Aruba    1969     NA     NA    622516000   1823611000           NA
6 ABW   Aruba    1970     NA     NA    835185000   1983973000           NA
# ℹ 10 more variables: import_kosis &lt;dbl&gt;, export_cow &lt;dbl&gt;, import_cow &lt;dbl&gt;,
#   index &lt;dbl&gt;, cpi &lt;dbl&gt;, export_cons_2015 &lt;dbl&gt;, import_cons_2015 &lt;dbl&gt;,
#   total_export_cons_2015 &lt;dbl&gt;, total_import_cons_2015 &lt;dbl&gt;,
#   updated_at &lt;date&gt;</code></pre>
</div>
</div>
<p>We can read the data’s documentation using the <code>?</code> function.</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="op">?</span><span class="va">trade_data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s assign the data to a new object.</p>
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">trade_data</span> <span class="op">&lt;-</span> <span class="va">trade_data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="selecting-columns" class="level2" data-number="5.1"><h2 data-number="5.1" class="anchored" data-anchor-id="selecting-columns">
<span class="header-section-number">5.1</span> Selecting columns</h2>
<p>We do not need all the columns in the data. We can select the columns we need using the <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> function. For now, I will select only five columns: <code>iso3c</code> (country code), <code>country</code> (country name), <code>year</code> (year), <code>export_kosis</code> (Korea’s exports as reported by Korean Statistical Information Service (KOSIS)), and <code>import_kosis</code> (Korea’s exports as reported by KOSIS).</p>
<p>We can either assign the updated object with the selected columns to the same object or a new object. Here, I will assign the updated object to a new object.</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">trade</span> <span class="op">&lt;-</span> <span class="va">trade_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">iso3c</span>, <span class="va">country</span>, <span class="va">year</span>, <span class="va">export_kosis</span>, <span class="va">import_kosis</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s see how many rows and columns <code>trade_data</code> and <code>trade</code> have.</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">trade_data</span><span class="op">)</span> <span class="co"># number of rows in trade_data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 16511</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">trade_data</span><span class="op">)</span> <span class="co"># number of columns in trade_data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 18</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">trade</span><span class="op">)</span> <span class="co"># number of rows in trade</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 16511</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">trade</span><span class="op">)</span> <span class="co"># number of columns in trade</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
<p><code>trade_data</code> has 16511 rows and 18 columns. <code>trade</code> has 16511 rows and 5 columns.</p>
</section><section id="filtering-rows" class="level2" data-number="5.2"><h2 data-number="5.2" class="anchored" data-anchor-id="filtering-rows">
<span class="header-section-number">5.2</span> Filtering rows</h2>
<p>We can filter rows based on a condition using the <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> function. Here, I will filter rows where the year is larger than 1964. Indeed, KOSIS data starts from 1965. This time, I will assign the updated object to the same object. We need a condition for filtering. In this case, the condition is <code>year &gt; 1964</code>. It is the same as <code>year &gt;= 1965</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">trade</span> <span class="op">&lt;-</span> <span class="va">trade</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">&gt;</span> <span class="fl">1964</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s create a new object with the data from only 2019. <code>==</code> is the condition for equality. We need to use <code>==</code> instead of <code>=</code> for equality condition, and we need to be careful about it.</p>
<div class="cell">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">trade_2019</span> <span class="op">&lt;-</span> <span class="va">trade</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2019</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># let's see what the data looks like:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">trade_2019</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  iso3c country        year export_kosis import_kosis
  &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;
1 ABW   Aruba          2019     10396000         1000
2 AFG   Afghanistan    2019     49930000        38000
3 AGO   Angola         2019    236830000     16733000
4 AIA   Anguilla       2019       817000         1000
5 ALA   Åland Islands  2019           NA            0
6 ALB   Albania        2019     20744000      3357000</code></pre>
</div>
</div>
<p>Let’s create a new object with the data from only three countries: United States, China, and Japan. We need to use <code>%in%</code> as a condition for multiple values that we look for in the dataframe.</p>
<div class="cell">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">trade_us_china_japan</span> <span class="op">&lt;-</span> <span class="va">trade</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">country</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"United States"</span>, <span class="st">"China"</span>, <span class="st">"Japan"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># let's see what the data looks like:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">trade_us_china_japan</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  iso3c country  year export_kosis import_kosis
  &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;
1 CHN   China    1965           NA           NA
2 CHN   China    1966           NA           NA
3 CHN   China    1967           NA           NA
4 CHN   China    1968           NA           NA
5 CHN   China    1969           NA           NA
6 CHN   China    1970           NA           NA</code></pre>
</div>
</div>
<p>We can filter the rows for multiple years using the <code>%in%</code> operator as well. Let’s create a new object with the data from 2015, 2016, 2017, and 2018. <code>:</code> is used to create a sequence of numbers. <code>2015:2018</code> creates a sequence of numbers from 2015 to 2018.</p>
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">trade_2015_2018</span> <span class="op">&lt;-</span> <span class="va">trade</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fl">2015</span><span class="op">:</span><span class="fl">2018</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can also filter rows based on multiple conditions. Let’s create a new object with the data from 2015, 2016, 2017, and 2018 using the <code>&amp;</code> operator, which means “and”.</p>
<div class="cell">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">trade_2015_2018_backup</span> <span class="op">&lt;-</span> <span class="va">trade</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">&gt;=</span> <span class="fl">2015</span> <span class="co"># year is greater than or equal to 2015</span></span>
<span>         <span class="op">&amp;</span> <span class="co"># and</span></span>
<span>         <span class="va">year</span> <span class="op">&lt;=</span> <span class="fl">2018</span> <span class="co"># year is less than or equal to 2018</span></span>
<span>         <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s check if <code>trade_2015_2018</code> and <code>trade_2015_2018_backup</code> are the same.</p>
<div class="cell">
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/identical.html">identical</a></span><span class="op">(</span><span class="va">trade_2015_2018</span>, <span class="va">trade_2015_2018_backup</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>Now, let’s filter the data for 2015, 2016, 2017, and 2018 for the United States, China, and Japan, this time using country codes.</p>
<div class="cell">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">trade_us_china_japan_2015_2018</span> <span class="op">&lt;-</span> <span class="va">trade</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fl">2015</span><span class="op">:</span><span class="fl">2018</span> <span class="co"># included years are 2015, 2016, 2017, and 2018</span></span>
<span>         <span class="op">&amp;</span> <span class="co"># and</span></span>
<span>         <span class="va">iso3c</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"USA"</span>, <span class="st">"CHN"</span>, <span class="st">"JPN"</span><span class="op">)</span> <span class="co"># included country codes are USA, CHN, and JPN</span></span>
<span>         <span class="op">)</span></span>
<span></span>
<span><span class="co"># let's see what the data looks like:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">trade_us_china_japan_2015_2018</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  iso3c country  year export_kosis import_kosis
  &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;
1 CHN   China    2015 137123934000  90250275000
2 CHN   China    2016 124432941000  86980135000
3 CHN   China    2017 142120000000  97860114000
4 CHN   China    2018 162125055000 106488592000
5 JPN   Japan    2015  25576507000  45853834000
6 JPN   Japan    2016  24355036000  47466592000</code></pre>
</div>
</div>
<p>Two other operators that we can use for filtering are <code>|</code> and <code>!</code>. <code>|</code> means “or” and <code>!</code> means “not”. Let’s create a new object with the data for 2015, 2016, 2017, and 2018 or the export volume is larger than 100 billion USD.</p>
<div class="cell">
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">trade_2015_2018_or_export</span> <span class="op">&lt;-</span> <span class="va">trade</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fl">2015</span><span class="op">:</span><span class="fl">2018</span> <span class="co"># included years are 2015, 2016, 2017, and 2018</span></span>
<span>         <span class="op">|</span> <span class="co">#or</span></span>
<span>         <span class="va">export_kosis</span> <span class="op">&gt;</span> <span class="fl">110000000000</span> <span class="co"># export volume is larger than 110 billion USD</span></span>
<span>         <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s see what else is included that is not in the years 2015, 2016, 2017, and 2018.</p>
<div class="cell">
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">trade_2015_2018_or_export</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="va">year</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fl">2015</span><span class="op">:</span><span class="fl">2018</span><span class="op">)</span> <span class="co">#  excluded years are 2015, 2016, 2017, and 2018</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 × 5
   iso3c country        year export_kosis import_kosis
   &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;
 1 CHN   China          2010 116837833000  71573603000
 2 CHN   China          2011 134185009000  86432238000
 3 CHN   China          2012 134322564000  80784595000
 4 CHN   China          2013 145869498000  83052877000
 5 CHN   China          2014 145287701000  90082226000
 6 CHN   China          2019 136202533000 107228736000
 7 CHN   China          2020 132565445000 108884645000
 8 CHN   China          2021 162912974000 138628127000
 9 CHN   China          2022 155789389000 154576314000
10 CHN   China          2023 124817682000 142857338000
11 USA   United States  2023 115696334000  71272030000</code></pre>
</div>
</div>
</section><section id="arranging-rows" class="level2" data-number="5.3"><h2 data-number="5.3" class="anchored" data-anchor-id="arranging-rows">
<span class="header-section-number">5.3</span> Arranging rows</h2>
<p>We can arrange rows based on a column using the <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> function. Let’s arrange the data by year in ascending order.</p>
<div class="cell">
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">trade</span> <span class="op">&lt;-</span> <span class="va">trade</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">trade</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  iso3c country        year export_kosis import_kosis
  &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;
1 ABW   Aruba          1965           NA           NA
2 AFG   Afghanistan    1965           NA           NA
3 AGO   Angola         1965           NA           NA
4 AIA   Anguilla       1965           NA           NA
5 ALA   Åland Islands  1965           NA           NA
6 ALB   Albania        1965           NA           NA</code></pre>
</div>
</div>
<p>We can arrange by year in descending order.</p>
<div class="cell">
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">trade</span> <span class="op">&lt;-</span> <span class="va">trade</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">trade</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  iso3c country        year export_kosis import_kosis
  &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;
1 ABW   Aruba          2023     21005000       121000
2 AFG   Afghanistan    2023     25079000      1045000
3 AGO   Angola         2023    474761000        11000
4 AIA   Anguilla       2023        96000        10000
5 ALA   Åland Islands  2023        15000            0
6 ALB   Albania        2023    142311000     11053000</code></pre>
</div>
</div>
<p>We can arrange alphabetically by country codes in ascending order.</p>
<div class="cell">
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">trade</span> <span class="op">&lt;-</span> <span class="va">trade</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">iso3c</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">trade</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  iso3c country  year export_kosis import_kosis
  &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;
1 ABW   Aruba    2023     21005000       121000
2 ABW   Aruba    2022     24954000        15000
3 ABW   Aruba    2021     11612000     93314000
4 ABW   Aruba    2020      3070000     83864000
5 ABW   Aruba    2019     10396000         1000
6 ABW   Aruba    2018     14807000      2935000</code></pre>
</div>
</div>
</section><section id="mutating-columns" class="level2" data-number="5.4"><h2 data-number="5.4" class="anchored" data-anchor-id="mutating-columns">
<span class="header-section-number">5.4</span> Mutating columns</h2>
<p>We can create new columns or update existing columns using the <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> function. Let’s create a new column, <code>trade_kosis</code>, which is the total trade volume of Korea with a country in a year. The total trade volume is the sum of exports and imports.</p>
<div class="cell">
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">trade</span> <span class="op">&lt;-</span> <span class="va">trade</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>trade_kosis <span class="op">=</span> <span class="va">export_kosis</span> <span class="op">+</span> <span class="va">import_kosis</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">trade</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  iso3c country  year export_kosis import_kosis trade_kosis
  &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
1 ABW   Aruba    2023     21005000       121000    21126000
2 ABW   Aruba    2022     24954000        15000    24969000
3 ABW   Aruba    2021     11612000     93314000   104926000
4 ABW   Aruba    2020      3070000     83864000    86934000
5 ABW   Aruba    2019     10396000         1000    10397000
6 ABW   Aruba    2018     14807000      2935000    17742000</code></pre>
</div>
</div>
</section><section id="grouping-and-summarizing-data" class="level2" data-number="5.5"><h2 data-number="5.5" class="anchored" data-anchor-id="grouping-and-summarizing-data">
<span class="header-section-number">5.5</span> Grouping and summarizing data</h2>
<p>We can group data based on one or more columns using the <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> function. We can summarize data based on the groups using the <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code> function. Let’s group the data by year and summarize the total trade volume of Korea in each year.</p>
<p>We need to be careful about one thing. There are missing values in the data. We need to ignore them (in other words treat them as zero) when we calculate the total trade volume. Otherwise, the total trade volume will be <code>NA</code> if there is at least one missing value in the data for a year. We can use the <code>na.rm = TRUE</code> argument in the <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> function to remove missing values.</p>
<div class="cell">
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">trade_volume</span> <span class="op">&lt;-</span> <span class="va">trade</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>total_trade_kosis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">trade_kosis</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">total_trade_kosis</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">trade_volume</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
   year total_trade_kosis
  &lt;dbl&gt;             &lt;dbl&gt;
1  2022     1400216998000
2  2023     1270073156000
3  2021     1248778081000
4  2018     1127928070000
5  2014     1092728073000
6  2011     1077938860000</code></pre>
</div>
</div>
<p>We can also group the data by country. Let’s summarize the total trade volume of Korea with each country since 1965.</p>
<div class="cell">
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">trade_country</span> <span class="op">&lt;-</span> <span class="va">trade</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>total_trade_kosis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">trade_kosis</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">total_trade_kosis</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">trade_country</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  country             total_trade_kosis
  &lt;chr&gt;                           &lt;dbl&gt;
1 China                   4455699092000
2 United States           3179689314000
3 Japan                   2424243884000
4 Vietnam                  773845848000
5 Hong Kong SAR China      759431632000
6 Saudi Arabia             753711941000</code></pre>
</div>
</div>
</section><section id="conditional-mutating" class="level2" data-number="5.6"><h2 data-number="5.6" class="anchored" data-anchor-id="conditional-mutating">
<span class="header-section-number">5.6</span> Conditional Mutating</h2>
<p>We can conditionally mutate columns using the <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code> function. Let’s create a new column, <code>trade_status</code>, which is “surplus” if the export volume is larger than the import volume, “deficit” if the import volume is larger than the export volume, and “balanced” if the export volume is equal to the import volume. If the export or import volume is missing, we will make the trade status “unknown”. We can use <code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code> to check if a value is missing.</p>
<div class="cell">
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">trade</span> <span class="op">&lt;-</span> <span class="va">trade</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>trade_status <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">export_kosis</span> <span class="op">&gt;</span> <span class="va">import_kosis</span> <span class="op">~</span> <span class="st">"surplus"</span>, <span class="co"># export volume is larger than import volume</span></span>
<span>    <span class="va">export_kosis</span> <span class="op">&lt;</span> <span class="va">import_kosis</span> <span class="op">~</span> <span class="st">"deficit"</span>, <span class="co"># export volume is less than import volume</span></span>
<span>    <span class="va">export_kosis</span> <span class="op">==</span> <span class="va">import_kosis</span> <span class="op">~</span> <span class="st">"balanced"</span>, <span class="co"># export volume is equal to import volume</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">export_kosis</span><span class="op">)</span> <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">import_kosis</span><span class="op">)</span> <span class="op">~</span> <span class="st">"unknown"</span>, <span class="co"># export or import volume is missing</span></span>
<span>    <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"everything else"</span> <span class="co"># in this instance, we do not need "TRUE ~" since we cover all `case_when()` options above. But in other cases, you may need it. "TRUE ~" basically helps you assign a new value for every other condition that is not mentioned above.</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">trade</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 7
  iso3c country  year export_kosis import_kosis trade_kosis trade_status
  &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;       
1 ABW   Aruba    2023     21005000       121000    21126000 surplus     
2 ABW   Aruba    2022     24954000        15000    24969000 surplus     
3 ABW   Aruba    2021     11612000     93314000   104926000 deficit     
4 ABW   Aruba    2020      3070000     83864000    86934000 deficit     
5 ABW   Aruba    2019     10396000         1000    10397000 surplus     
6 ABW   Aruba    2018     14807000      2935000    17742000 surplus     </code></pre>
</div>
</div>
<p>In this instance, we do not need “TRUE ~” since we cover all <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code> options above. But in other cases, you may need it. “TRUE ~” basically helps you assign a new value for every other condition that is not mentioned above.</p>
<p>We can create a table using the <code><a href="https://rdrr.io/r/base/table.html">table()</a></code> function for the trade status of Korea since 1965.</p>
<div class="cell">
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">trade</span><span class="op">$</span><span class="va">trade_status</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
balanced  deficit  surplus  unknown 
     143     3134     6567     5444 </code></pre>
</div>
</div>
</section><section id="merging-datasets" class="level2" data-number="5.7"><h2 data-number="5.7" class="anchored" data-anchor-id="merging-datasets">
<span class="header-section-number">5.7</span> Merging datasets</h2>
<p>Right now, we only have one dataset. Let’s get another dataset from the <code>WDI</code> package, which includes World Bank’s World Development Indicators data. Let’s install the package if you do not have it yet.</p>
<div class="cell">
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># install.packages("WDI") # if you haven't installed the WDI package yet, remove the # sign.</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://vincentarelbundock.github.io/WDI/">WDI</a></span><span class="op">)</span> <span class="co"># load the WDI package</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s get the data for the GDP of all countries since 1965. You can search for indicators from the World Bank’s World Development Indicators database <a href="https://databank.worldbank.org/source/world-development-indicators">here</a> or using the <code>WDIsearch</code> function in the <code>WDI</code> package. For details, you can check out <code>WDI</code>’s documentation using the <code>?</code> function or <a href="https://github.com/vincentarelbundock/WDI">its Github page</a>.</p>
<div class="cell">
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">wdi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/WDI/man/WDI.html">WDI</a></span><span class="op">(</span>country <span class="op">=</span> <span class="st">"all"</span>, <span class="co"># all countries</span></span>
<span>           indicator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gdp"</span> <span class="op">=</span> <span class="st">"NY.GDP.MKTP.KD"</span>, <span class="co"># GDP at constant 2015 US dollars</span></span>
<span>                         <span class="st">"gdp_pc"</span> <span class="op">=</span> <span class="st">"NY.GDP.PCAP.KD"</span><span class="op">)</span>, <span class="co"># GDP per capita at constant 2015 US dollars </span></span>
<span>           start <span class="op">=</span> <span class="fl">1965</span>, <span class="co"># start year</span></span>
<span>           end <span class="op">=</span> <span class="fl">2024</span>, <span class="co"># end year</span></span>
<span>           extra <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># include extra columns included in the WDI package defaults</span></span>
<span>           language <span class="op">=</span> <span class="st">"en"</span> <span class="co"># language is English</span></span>
<span>           <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">wdi</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      country iso2c iso3c year status lastupdated        gdp   gdp_pc
1 Afghanistan    AF   AFG 1965         2024-09-19         NA       NA
2 Afghanistan    AF   AFG 2003         2024-09-19 7867263256 347.4152
3 Afghanistan    AF   AFG 1966         2024-09-19         NA       NA
4 Afghanistan    AF   AFG 2005         2024-09-19 8874480196 363.5415
5 Afghanistan    AF   AFG 1971         2024-09-19         NA       NA
6 Afghanistan    AF   AFG 2002         2024-09-19 7228795919 344.2242
      region capital longitude latitude     income lending
1 South Asia   Kabul   69.1761  34.5228 Low income     IDA
2 South Asia   Kabul   69.1761  34.5228 Low income     IDA
3 South Asia   Kabul   69.1761  34.5228 Low income     IDA
4 South Asia   Kabul   69.1761  34.5228 Low income     IDA
5 South Asia   Kabul   69.1761  34.5228 Low income     IDA
6 South Asia   Kabul   69.1761  34.5228 Low income     IDA</code></pre>
</div>
</div>
<p>We wanted extra WDI data, but we don’t need all. Let’s select the ones we need. This time, let’s exclude the columns we do not need by using the <code>-</code> sign. Then let’s exclude non-country groups (e.g., “High income”, “Not classified”) by filtering out rows where the <code>iso3c</code> column is missing. Then let’s arrange the data by country code and year.</p>
<div class="cell">
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">wdi</span> <span class="op">&lt;-</span> <span class="va">wdi</span> <span class="op">|&gt;</span></span>
<span>  <span class="co">#select(-iso2c, -status, -lastupdated, -capital, -lending, -longitude, -latitude) |&gt; # exclude these columns</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">iso3c</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># exclude the rows that are missing country codes (in other words, we only include the ones that are not (!) missing country codes (iso3c))</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">iso3c</span>, <span class="va">year</span><span class="op">)</span> <span class="co"># arrange the data by country code and year</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">wdi</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              country iso2c iso3c year status lastupdated          gdp
1         High income    XD       1965         2024-09-19 1.214382e+13
2          Low income    XM       1965         2024-09-19           NA
3 Lower middle income    XN       1965         2024-09-19 5.474380e+11
4      Not classified    XY       1965         2024-09-19           NA
5 Upper middle income    XT       1965         2024-09-19 1.481616e+12
6         High income    XD       1966         2024-09-19 1.281436e+13
      gdp_pc region capital longitude latitude income lending
1 12593.9054   &lt;NA&gt;    &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;    &lt;NA&gt;
2         NA   &lt;NA&gt;    &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;    &lt;NA&gt;
3   584.5733   &lt;NA&gt;    &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;    &lt;NA&gt;
4         NA   &lt;NA&gt;    &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;    &lt;NA&gt;
5  1171.4299   &lt;NA&gt;    &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;    &lt;NA&gt;
6 13154.2957   &lt;NA&gt;    &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;    &lt;NA&gt;</code></pre>
</div>
</div>
<p>This did not work out. Probably these entries are not missing, but instead simply empty! Let’s check that. Let’s try filtering out empty country codes (instead of missing country codes which we checked with <code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code>).</p>
<div class="cell">
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">wdi</span> <span class="op">&lt;-</span> <span class="va">wdi</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">iso3c</span> <span class="op">!=</span> <span class="st">""</span><span class="op">)</span> <span class="co"># exclude the rows that have empty country codes. We check it as an empty character. "!=" means not equal to.</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">wdi</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  country iso2c iso3c year status lastupdated gdp gdp_pc
1   Aruba    AW   ABW 1965         2024-09-19  NA     NA
2   Aruba    AW   ABW 1966         2024-09-19  NA     NA
3   Aruba    AW   ABW 1967         2024-09-19  NA     NA
4   Aruba    AW   ABW 1968         2024-09-19  NA     NA
5   Aruba    AW   ABW 1969         2024-09-19  NA     NA
6   Aruba    AW   ABW 1970         2024-09-19  NA     NA
                     region    capital longitude latitude      income
1 Latin America &amp; Caribbean Oranjestad  -70.0167  12.5167 High income
2 Latin America &amp; Caribbean Oranjestad  -70.0167  12.5167 High income
3 Latin America &amp; Caribbean Oranjestad  -70.0167  12.5167 High income
4 Latin America &amp; Caribbean Oranjestad  -70.0167  12.5167 High income
5 Latin America &amp; Caribbean Oranjestad  -70.0167  12.5167 High income
6 Latin America &amp; Caribbean Oranjestad  -70.0167  12.5167 High income
         lending
1 Not classified
2 Not classified
3 Not classified
4 Not classified
5 Not classified
6 Not classified</code></pre>
</div>
</div>
<p>Yes, that was it. Instead of NA, those country code columns were empty for those rows. Now that we successfully filtered out the rows with empty country codes, let’s join Korea’s trade data with the WDI data. There are different types of joins. I will explain five of them. To make things easier, I will create smaller datasets for the demonstration. We will have only the data for the United States, China, and Japan in the trade data. We will have only the data for the United States, Japan and Italy in the WDI data.</p>
<div class="cell">
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">trade_df</span> <span class="op">&lt;-</span> <span class="va">trade</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">iso3c</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"USA"</span>, <span class="st">"CHN"</span>, <span class="st">"JPN"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">trade_df</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 7
  iso3c country  year export_kosis import_kosis  trade_kosis trade_status
  &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;       
1 CHN   China    2023 124817682000 142857338000 267675020000 deficit     
2 CHN   China    2022 155789389000 154576314000 310365703000 surplus     
3 CHN   China    2021 162912974000 138628127000 301541101000 surplus     
4 CHN   China    2020 132565445000 108884645000 241450090000 surplus     
5 CHN   China    2019 136202533000 107228736000 243431269000 surplus     
6 CHN   China    2018 162125055000 106488592000 268613647000 surplus     </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">wdi_df</span> <span class="op">&lt;-</span> <span class="va">wdi</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">iso3c</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"USA"</span>, <span class="st">"JPN"</span>, <span class="st">"ITA"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="additional/dataframes.png" class="img-fluid figure-img"></p>
<figcaption>Dataframes</figcaption></figure>
</div>
<section id="inner_join" class="level3" data-number="5.7.1"><h3 data-number="5.7.1" class="anchored" data-anchor-id="inner_join">
<span class="header-section-number">5.7.1</span> inner_join</h3>
<p><code>inner_join</code> returns only the rows that have matching values in both datasets. Let’s join the <code>trade_df</code> and <code>wdi_df</code> datasets using the <code>iso3c</code> and <code>year</code> columns.</p>
<div class="cell">
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">inner_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="va">trade_df</span>, <span class="va">wdi_df</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"iso3c"</span>, <span class="st">"year"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># you can also write it like this:</span></span>
<span></span>
<span><span class="co"># inner_df &lt;- trade_df |&gt; inner_join(wdi_df, by = c("iso3c", "year"), suffix = c("_trade", "_wdi"))</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">inner_df</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 19
  iso3c country.x  year export_kosis import_kosis trade_kosis trade_status
  &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;       
1 JPN   Japan      2023  29000616000  47656468000 76657084000 deficit     
2 JPN   Japan      2022  30606278000  54711795000 85318073000 deficit     
3 JPN   Japan      2021  30061806000  54642165000 84703971000 deficit     
4 JPN   Japan      2020  25097651000  46023036000 71120687000 deficit     
5 JPN   Japan      2019  28420213000  47580853000 76001066000 deficit     
6 JPN   Japan      2018  30528580000  54603749000 85132329000 deficit     
# ℹ 12 more variables: country.y &lt;chr&gt;, iso2c &lt;chr&gt;, status &lt;chr&gt;,
#   lastupdated &lt;chr&gt;, gdp &lt;dbl&gt;, gdp_pc &lt;dbl&gt;, region &lt;chr&gt;, capital &lt;chr&gt;,
#   longitude &lt;chr&gt;, latitude &lt;chr&gt;, income &lt;chr&gt;, lending &lt;chr&gt;</code></pre>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="additional/inner_join2.png" class="img-fluid figure-img"></p>
<figcaption>inner_join</figcaption></figure>
</div>
<p>The column names that we will join by are the same in both dataframes (“iso3c” and “year”). If it was not the same, we could write the code as follows:</p>
<div class="cell">
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">inner_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="va">trade_df</span>, <span class="va">wdi_df</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"iso3c"</span> <span class="op">=</span> <span class="st">"iso3c"</span>, <span class="st">"year"</span> <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span><span class="op">)</span> <span class="co"># the first element is from the first dataframe and the second element is from the second dataframe.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If, for example, the country code column name was “country_code” and the year column was “Year” in <code>trade_df</code>, you would replace the first “iso3c” with “country_code” and the first “year” with “Year”.</p>
<p>If there are columns with the same name in both dataframes other than the columns you use to join them, you can use the <code>suffix</code> argument to add a suffix to the column names. For example, in this case, we have columns named “country” in both dataframes. Since we didn’t have suffix in the above code, we have two columns “country.x” and “country.y”. If you want to add suffices, you can do it as follows:</p>
<div class="cell">
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">inner_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="va">trade_df</span>, <span class="va">wdi_df</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"iso3c"</span>, <span class="st">"year"</span><span class="op">)</span>, suffix <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"_trade"</span>, <span class="st">"_wdi"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">inner_df</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 19
  iso3c country_trade  year export_kosis import_kosis trade_kosis trade_status
  &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;       
1 JPN   Japan          2023  29000616000  47656468000 76657084000 deficit     
2 JPN   Japan          2022  30606278000  54711795000 85318073000 deficit     
3 JPN   Japan          2021  30061806000  54642165000 84703971000 deficit     
4 JPN   Japan          2020  25097651000  46023036000 71120687000 deficit     
5 JPN   Japan          2019  28420213000  47580853000 76001066000 deficit     
6 JPN   Japan          2018  30528580000  54603749000 85132329000 deficit     
# ℹ 12 more variables: country_wdi &lt;chr&gt;, iso2c &lt;chr&gt;, status &lt;chr&gt;,
#   lastupdated &lt;chr&gt;, gdp &lt;dbl&gt;, gdp_pc &lt;dbl&gt;, region &lt;chr&gt;, capital &lt;chr&gt;,
#   longitude &lt;chr&gt;, latitude &lt;chr&gt;, income &lt;chr&gt;, lending &lt;chr&gt;</code></pre>
</div>
</div>
</section><section id="left_join" class="level3" data-number="5.7.2"><h3 data-number="5.7.2" class="anchored" data-anchor-id="left_join">
<span class="header-section-number">5.7.2</span> left_join</h3>
<p><code>left_join</code> returns all the rows from the left dataset and the matched rows from the right dataset. If there is no match, the result is <code>NA</code>. Let’s join the <code>trade_df</code> and <code>wdi_df</code> datasets using the <code>iso3c</code> and <code>year</code> columns.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="additional/left_join2.png" class="img-fluid figure-img"></p>
<figcaption>left_join</figcaption></figure>
</div>
<div class="cell">
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">left_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">trade_df</span>, <span class="va">wdi_df</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"iso3c"</span>, <span class="st">"year"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">left_df</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 19
  iso3c country.x  year export_kosis import_kosis  trade_kosis trade_status
  &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;       
1 CHN   China      2023 124817682000 142857338000 267675020000 deficit     
2 CHN   China      2022 155789389000 154576314000 310365703000 surplus     
3 CHN   China      2021 162912974000 138628127000 301541101000 surplus     
4 CHN   China      2020 132565445000 108884645000 241450090000 surplus     
5 CHN   China      2019 136202533000 107228736000 243431269000 surplus     
6 CHN   China      2018 162125055000 106488592000 268613647000 surplus     
# ℹ 12 more variables: country.y &lt;chr&gt;, iso2c &lt;chr&gt;, status &lt;chr&gt;,
#   lastupdated &lt;chr&gt;, gdp &lt;dbl&gt;, gdp_pc &lt;dbl&gt;, region &lt;chr&gt;, capital &lt;chr&gt;,
#   longitude &lt;chr&gt;, latitude &lt;chr&gt;, income &lt;chr&gt;, lending &lt;chr&gt;</code></pre>
</div>
</div>
</section><section id="right_join" class="level3" data-number="5.7.3"><h3 data-number="5.7.3" class="anchored" data-anchor-id="right_join">
<span class="header-section-number">5.7.3</span> right_join</h3>
<p><code>right_join</code> returns all the rows from the right dataset and the matched rows from the left dataset. If there is no match, the result is <code>NA</code>. Let’s join the <code>trade_df</code> and <code>wdi_df</code> datasets using the <code>iso3c</code> and <code>year</code> columns.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="additional/right_join2.png" class="img-fluid figure-img"></p>
<figcaption>right_join</figcaption></figure>
</div>
<div class="cell">
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">right_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">right_join</a></span><span class="op">(</span><span class="va">trade_df</span>, <span class="va">wdi_df</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"iso3c"</span>, <span class="st">"year"</span><span class="op">)</span>, suffix <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"_trade"</span>, <span class="st">"_wdi"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">right_df</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 19
  iso3c country_trade  year export_kosis import_kosis trade_kosis trade_status
  &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;       
1 JPN   Japan          2023  29000616000  47656468000 76657084000 deficit     
2 JPN   Japan          2022  30606278000  54711795000 85318073000 deficit     
3 JPN   Japan          2021  30061806000  54642165000 84703971000 deficit     
4 JPN   Japan          2020  25097651000  46023036000 71120687000 deficit     
5 JPN   Japan          2019  28420213000  47580853000 76001066000 deficit     
6 JPN   Japan          2018  30528580000  54603749000 85132329000 deficit     
# ℹ 12 more variables: country_wdi &lt;chr&gt;, iso2c &lt;chr&gt;, status &lt;chr&gt;,
#   lastupdated &lt;chr&gt;, gdp &lt;dbl&gt;, gdp_pc &lt;dbl&gt;, region &lt;chr&gt;, capital &lt;chr&gt;,
#   longitude &lt;chr&gt;, latitude &lt;chr&gt;, income &lt;chr&gt;, lending &lt;chr&gt;</code></pre>
</div>
</div>
</section><section id="full_join" class="level3" data-number="5.7.4"><h3 data-number="5.7.4" class="anchored" data-anchor-id="full_join">
<span class="header-section-number">5.7.4</span> full_join</h3>
<p><code>full_join</code> returns all the rows from both datasets. If there is no match, the result is <code>NA</code>. Let’s join the <code>trade_df</code> and <code>wdi_df</code> datasets using the <code>iso3c</code> and <code>year</code> columns.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="additional/full_join2.png" class="img-fluid figure-img"></p>
<figcaption>full_join</figcaption></figure>
</div>
<div class="cell">
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">full_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join</a></span><span class="op">(</span><span class="va">trade_df</span>, <span class="va">wdi_df</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"iso3c"</span>, <span class="st">"year"</span><span class="op">)</span>, suffix <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"_trade"</span>, <span class="st">"_wdi"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">full_df</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 19
  iso3c country_trade  year export_kosis import_kosis  trade_kosis trade_status
  &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;       
1 CHN   China          2023 124817682000 142857338000 267675020000 deficit     
2 CHN   China          2022 155789389000 154576314000 310365703000 surplus     
3 CHN   China          2021 162912974000 138628127000 301541101000 surplus     
4 CHN   China          2020 132565445000 108884645000 241450090000 surplus     
5 CHN   China          2019 136202533000 107228736000 243431269000 surplus     
6 CHN   China          2018 162125055000 106488592000 268613647000 surplus     
# ℹ 12 more variables: country_wdi &lt;chr&gt;, iso2c &lt;chr&gt;, status &lt;chr&gt;,
#   lastupdated &lt;chr&gt;, gdp &lt;dbl&gt;, gdp_pc &lt;dbl&gt;, region &lt;chr&gt;, capital &lt;chr&gt;,
#   longitude &lt;chr&gt;, latitude &lt;chr&gt;, income &lt;chr&gt;, lending &lt;chr&gt;</code></pre>
</div>
</div>
</section><section id="anti_join" class="level3" data-number="5.7.5"><h3 data-number="5.7.5" class="anchored" data-anchor-id="anti_join">
<span class="header-section-number">5.7.5</span> anti_join</h3>
<p><code>anti_join</code> returns all the rows from the left dataset that do not have a match in the right dataset. Let’s join the <code>trade_df</code> and <code>wdi_df</code> datasets using the <code>iso3c</code> and <code>year</code> columns.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="additional/anti_join2.png" class="img-fluid figure-img"></p>
<figcaption>anti_join</figcaption></figure>
</div>
<div class="cell">
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">anti_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join</a></span><span class="op">(</span><span class="va">trade_df</span>, <span class="va">wdi_df</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"iso3c"</span>, <span class="st">"year"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">anti_df</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 7
  iso3c country  year export_kosis import_kosis  trade_kosis trade_status
  &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;       
1 CHN   China    2023 124817682000 142857338000 267675020000 deficit     
2 CHN   China    2022 155789389000 154576314000 310365703000 surplus     
3 CHN   China    2021 162912974000 138628127000 301541101000 surplus     
4 CHN   China    2020 132565445000 108884645000 241450090000 surplus     
5 CHN   China    2019 136202533000 107228736000 243431269000 surplus     
6 CHN   China    2018 162125055000 106488592000 268613647000 surplus     </code></pre>
</div>
</div>
</section></section><section id="a-note-on-country-codes" class="level2" data-number="5.8"><h2 data-number="5.8" class="anchored" data-anchor-id="a-note-on-country-codes">
<span class="header-section-number">5.8</span> A Note on Country Codes</h2>
<p>It is often easier to work with standard country codes than country names when we work with multiple datasets. There are a few widely used standard country codes. Above, we used the ISO 3166-1 alpha-3 country codes. There are other commonly used country codes such as Correlates of War (COW) country codes, Varieties of Democracy (V-Dem) country codes, and more.</p>
<p>We can convert country names to country codes using the <code>countrycode</code> package. Let’s install the package if you do not have it yet.</p>
<div class="cell">
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># install.packages("countrycode") # if you haven't installed the countrycode package yet, remove the # sign.</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://vincentarelbundock.github.io/countrycode/">countrycode</a></span><span class="op">)</span> <span class="co"># load the countrycode package</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s convert the country names in the <code>trade_df</code> dataset to Correlates of War country codes. You can find the <code>countrycode</code> documentantion on its <a href="https://github.com/vincentarelbundock/countrycode">Github page</a> or by using the <code>?</code> function.</p>
<div class="cell">
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># ?countrycode</span></span>
<span></span>
<span><span class="va">trade_df</span> <span class="op">&lt;-</span> <span class="va">trade_df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>cown <span class="op">=</span> <span class="fu"><a href="https://vincentarelbundock.github.io/countrycode/reference/countrycode.html">countrycode</a></span><span class="op">(</span><span class="va">country</span>, origin <span class="op">=</span> <span class="st">"country.name"</span>, destination <span class="op">=</span> <span class="st">"cown"</span><span class="op">)</span><span class="op">)</span> <span class="co"># convert country names to Correlates of War numeric country codes (cown)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="a-note-on-working-with-korean-country-nameswrangling-1" class="level2" data-number="5.9"><h2 data-number="5.9" class="anchored" data-anchor-id="a-note-on-working-with-korean-country-nameswrangling-1">
<span class="header-section-number">5.9</span> A Note on Working with Korean Country Names<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>
</h2>
<p>In my research, I often work with country-year data from Korean sources, including data on diplomatic visits, trade, aid and so on. One of the fundamental difficulties I have had is the lack of universal country codes across different datasets. Further complicating matters is the inconsistency of country names in these datasets. For example, Democratic Republic of the Congo has five different spellings across different official sources that I could find: 콩고 민주공화국, 자이르, 콩고민주공화국, 콩고 민주 공화국, 콩고민주공화국(DR콩고).</p>
<p>To address this issue, I have created a function in my <code>kdiplo</code> package that converts Korean country names into ISO 3166-1 alpha-3 (<em>iso3c</em>) country codes. This function, <code>iso3c_kr</code>, is designed to assign universal iso3c country codes to Korean-language country names that will make it easier to join different kinds of data.</p>
<p>One still needs to check if the output is correct, especially for countries that have gone through political transitions such as Germany, Yugoslavia, Russia, Vietnam, Yemen and so on.</p>
<p>Sometimes the Korean government sources have overlapping data for Yugoslavia and Serbia, for example. In such cases, one needs to check the data and make sure that the data is correct.</p>
<p>For example, the following is sample Korean trade data from <a href="https://kosis.kr/statHtml/statHtml.do?orgId=360&amp;tblId=DT_1R11006_FRM101&amp;conn_path=I3">Korean Statistical Information Service (KOSIS)</a>:</p>
<div class="cell">
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># install.packages("readxl") # if you haven't installed the readxl package yet, remove the # sign.</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org">readxl</a></span><span class="op">)</span> <span class="co"># load the readxl package</span></span>
<span></span>
<span><span class="co"># let's read the xlsx data</span></span>
<span></span>
<span><span class="va">kosis_trade</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_xlsx</a></span><span class="op">(</span><span class="st">"data/kosis_trade_240330.xlsx"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># let's take a look at the data</span></span>
<span></span>
<span><span class="co"># install.packages("gt") # if you haven't installed the gt package yet, remove the # sign.</span></span>
<span></span>
<span><span class="co"># let's take a look at some of the data</span></span>
<span></span>
<span><span class="co"># remember, [row, column] format can be used in R for subsetting dataframes. So, we can look at rows 533 to 538 and columns 1 and 57 to 62.</span></span>
<span></span>
<span><span class="va">kosis_trade</span><span class="op">[</span><span class="fl">533</span><span class="op">:</span><span class="fl">538</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">57</span><span class="op">:</span><span class="fl">62</span><span class="op">)</span><span class="op">]</span> <span class="op">|&gt;</span> <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<div id="dvxaygxfnk" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#dvxaygxfnk table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#dvxaygxfnk thead, #dvxaygxfnk tbody, #dvxaygxfnk tfoot, #dvxaygxfnk tr, #dvxaygxfnk td, #dvxaygxfnk th {
  border-style: none;
}

#dvxaygxfnk p {
  margin: 0;
  padding: 0;
}

#dvxaygxfnk .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#dvxaygxfnk .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#dvxaygxfnk .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#dvxaygxfnk .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#dvxaygxfnk .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dvxaygxfnk .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dvxaygxfnk .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dvxaygxfnk .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#dvxaygxfnk .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#dvxaygxfnk .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#dvxaygxfnk .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#dvxaygxfnk .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#dvxaygxfnk .gt_spanner_row {
  border-bottom-style: hidden;
}

#dvxaygxfnk .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#dvxaygxfnk .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#dvxaygxfnk .gt_from_md > :first-child {
  margin-top: 0;
}

#dvxaygxfnk .gt_from_md > :last-child {
  margin-bottom: 0;
}

#dvxaygxfnk .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#dvxaygxfnk .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#dvxaygxfnk .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#dvxaygxfnk .gt_row_group_first td {
  border-top-width: 2px;
}

#dvxaygxfnk .gt_row_group_first th {
  border-top-width: 2px;
}

#dvxaygxfnk .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dvxaygxfnk .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#dvxaygxfnk .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#dvxaygxfnk .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dvxaygxfnk .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dvxaygxfnk .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#dvxaygxfnk .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#dvxaygxfnk .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#dvxaygxfnk .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dvxaygxfnk .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dvxaygxfnk .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dvxaygxfnk .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dvxaygxfnk .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dvxaygxfnk .gt_left {
  text-align: left;
}

#dvxaygxfnk .gt_center {
  text-align: center;
}

#dvxaygxfnk .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#dvxaygxfnk .gt_font_normal {
  font-weight: normal;
}

#dvxaygxfnk .gt_font_bold {
  font-weight: bold;
}

#dvxaygxfnk .gt_font_italic {
  font-style: italic;
}

#dvxaygxfnk .gt_super {
  font-size: 65%;
}

#dvxaygxfnk .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#dvxaygxfnk .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#dvxaygxfnk .gt_indent_1 {
  text-indent: 5px;
}

#dvxaygxfnk .gt_indent_2 {
  text-indent: 10px;
}

#dvxaygxfnk .gt_indent_3 {
  text-indent: 15px;
}

#dvxaygxfnk .gt_indent_4 {
  text-indent: 20px;
}

#dvxaygxfnk .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="header gt_col_headings">
<th id="국가별" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">국가별</th>
<th id="2018 년" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">2018 년</th>
<th id="2019 년" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">2019 년</th>
<th id="2020 년" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">2020 년</th>
<th id="2021 년" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">2021 년</th>
<th id="2022 년" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">2022 년</th>
<th id="2023 년" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">2023 년</th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="국가별">잠비아</td>
<td class="gt_row gt_right" headers="2018 년">26241</td>
<td class="gt_row gt_right" headers="2019 년">16087</td>
<td class="gt_row gt_right" headers="2020 년">17619</td>
<td class="gt_row gt_right" headers="2021 년">28356</td>
<td class="gt_row gt_right" headers="2022 년">14068</td>
<td class="gt_row gt_right" headers="2023 년">15459</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="국가별">잠비아</td>
<td class="gt_row gt_right" headers="2018 년">108344</td>
<td class="gt_row gt_right" headers="2019 년">54542</td>
<td class="gt_row gt_right" headers="2020 년">15164</td>
<td class="gt_row gt_right" headers="2021 년">100606</td>
<td class="gt_row gt_right" headers="2022 년">82198</td>
<td class="gt_row gt_right" headers="2023 년">53867</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="국가별">자이르</td>
<td class="gt_row gt_right" headers="2018 년">NA</td>
<td class="gt_row gt_right" headers="2019 년">NA</td>
<td class="gt_row gt_right" headers="2020 년">NA</td>
<td class="gt_row gt_right" headers="2021 년">NA</td>
<td class="gt_row gt_right" headers="2022 년">NA</td>
<td class="gt_row gt_right" headers="2023 년">NA</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="국가별">자이르</td>
<td class="gt_row gt_right" headers="2018 년">618</td>
<td class="gt_row gt_right" headers="2019 년">8</td>
<td class="gt_row gt_right" headers="2020 년">113</td>
<td class="gt_row gt_right" headers="2021 년">4</td>
<td class="gt_row gt_right" headers="2022 년">NA</td>
<td class="gt_row gt_right" headers="2023 년">NA</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="국가별">짐바브웨</td>
<td class="gt_row gt_right" headers="2018 년">25964</td>
<td class="gt_row gt_right" headers="2019 년">14088</td>
<td class="gt_row gt_right" headers="2020 년">15514</td>
<td class="gt_row gt_right" headers="2021 년">20404</td>
<td class="gt_row gt_right" headers="2022 년">16083</td>
<td class="gt_row gt_right" headers="2023 년">19563</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="국가별">짐바브웨</td>
<td class="gt_row gt_right" headers="2018 년">4909</td>
<td class="gt_row gt_right" headers="2019 년">13098</td>
<td class="gt_row gt_right" headers="2020 년">11377</td>
<td class="gt_row gt_right" headers="2021 년">9627</td>
<td class="gt_row gt_right" headers="2022 년">10415</td>
<td class="gt_row gt_right" headers="2023 년">20862</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># you can use the gt package to create a table.</span></span>
<span><span class="co"># you can use "::" to access the functions in the package without loading the package.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And, the following is sample Korean aid data from <a href="https://stats.odakorea.go.kr/portal/odakorea/detail">Korea’s ODA portal</a>:</p>
<div class="cell">
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">aid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_xlsx</a></span><span class="op">(</span><span class="st">"data/korea_total_aid_2019_230709.xlsx"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">aid</span> <span class="op">&lt;-</span> <span class="va">aid</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span> <span class="co"># we only need the first five columns</span></span>
<span></span>
<span><span class="va">aid</span> <span class="op">&lt;-</span> <span class="va">aid</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/set_names.html">set_names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"country_kr"</span>, <span class="st">"sector"</span>, <span class="st">"no_of_projects"</span>, <span class="st">"aid_usd"</span>, <span class="st">"aid_krw"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># This sample data is only 2019; so we will add the year column, and assign 2019 to all rows.</span></span>
<span></span>
<span><span class="va">aid</span><span class="op">$</span><span class="va">year</span> <span class="op">&lt;-</span> <span class="fl">2019</span></span>
<span></span>
<span><span class="co"># let's take a look at some of the data</span></span>
<span><span class="va">aid</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">150</span>, <span class="fl">250</span>, <span class="fl">350</span>, <span class="fl">450</span><span class="op">)</span>,<span class="op">]</span> <span class="op">|&gt;</span> <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<div id="hjkhixauhy" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#hjkhixauhy table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#hjkhixauhy thead, #hjkhixauhy tbody, #hjkhixauhy tfoot, #hjkhixauhy tr, #hjkhixauhy td, #hjkhixauhy th {
  border-style: none;
}

#hjkhixauhy p {
  margin: 0;
  padding: 0;
}

#hjkhixauhy .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#hjkhixauhy .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#hjkhixauhy .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#hjkhixauhy .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#hjkhixauhy .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hjkhixauhy .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hjkhixauhy .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hjkhixauhy .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#hjkhixauhy .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#hjkhixauhy .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#hjkhixauhy .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#hjkhixauhy .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#hjkhixauhy .gt_spanner_row {
  border-bottom-style: hidden;
}

#hjkhixauhy .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#hjkhixauhy .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#hjkhixauhy .gt_from_md > :first-child {
  margin-top: 0;
}

#hjkhixauhy .gt_from_md > :last-child {
  margin-bottom: 0;
}

#hjkhixauhy .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#hjkhixauhy .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#hjkhixauhy .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#hjkhixauhy .gt_row_group_first td {
  border-top-width: 2px;
}

#hjkhixauhy .gt_row_group_first th {
  border-top-width: 2px;
}

#hjkhixauhy .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hjkhixauhy .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#hjkhixauhy .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#hjkhixauhy .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hjkhixauhy .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hjkhixauhy .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#hjkhixauhy .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#hjkhixauhy .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#hjkhixauhy .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hjkhixauhy .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hjkhixauhy .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hjkhixauhy .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hjkhixauhy .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hjkhixauhy .gt_left {
  text-align: left;
}

#hjkhixauhy .gt_center {
  text-align: center;
}

#hjkhixauhy .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#hjkhixauhy .gt_font_normal {
  font-weight: normal;
}

#hjkhixauhy .gt_font_bold {
  font-weight: bold;
}

#hjkhixauhy .gt_font_italic {
  font-style: italic;
}

#hjkhixauhy .gt_super {
  font-size: 65%;
}

#hjkhixauhy .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#hjkhixauhy .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#hjkhixauhy .gt_indent_1 {
  text-indent: 5px;
}

#hjkhixauhy .gt_indent_2 {
  text-indent: 10px;
}

#hjkhixauhy .gt_indent_3 {
  text-indent: 15px;
}

#hjkhixauhy .gt_indent_4 {
  text-indent: 20px;
}

#hjkhixauhy .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="header gt_col_headings">
<th id="country_kr" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">country_kr</th>
<th id="sector" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">sector</th>
<th id="no_of_projects" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">no_of_projects</th>
<th id="aid_usd" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">aid_usd</th>
<th id="aid_krw" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">aid_krw</th>
<th id="year" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">year</th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="country_kr">베트남</td>
<td class="gt_row gt_left" headers="sector">통신정책, 계획 및 행정(voluntary code)</td>
<td class="gt_row gt_right" headers="no_of_projects">2</td>
<td class="gt_row gt_right" headers="aid_usd">232334</td>
<td class="gt_row gt_right" headers="aid_krw">270736486</td>
<td class="gt_row gt_right" headers="year">2019</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="country_kr">캄보디아</td>
<td class="gt_row gt_left" headers="sector">11321</td>
<td class="gt_row gt_right" headers="no_of_projects">1</td>
<td class="gt_row gt_right" headers="aid_usd">85815</td>
<td class="gt_row gt_right" headers="aid_krw">99999361</td>
<td class="gt_row gt_right" headers="year">2019</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="country_kr">미얀마</td>
<td class="gt_row gt_left" headers="sector">사회보호/보장</td>
<td class="gt_row gt_right" headers="no_of_projects">1</td>
<td class="gt_row gt_right" headers="aid_usd">103460</td>
<td class="gt_row gt_right" headers="aid_krw">120560903</td>
<td class="gt_row gt_right" headers="year">2019</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="country_kr">라오스</td>
<td class="gt_row gt_left" headers="sector">비정규 농업훈련</td>
<td class="gt_row gt_right" headers="no_of_projects">1</td>
<td class="gt_row gt_right" headers="aid_usd">107958</td>
<td class="gt_row gt_right" headers="aid_krw">125802378</td>
<td class="gt_row gt_right" headers="year">2019</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="country_kr">몽골</td>
<td class="gt_row gt_left" headers="sector">의료서비스</td>
<td class="gt_row gt_right" headers="no_of_projects">5</td>
<td class="gt_row gt_right" headers="aid_usd">511824</td>
<td class="gt_row gt_right" headers="aid_krw">596423389</td>
<td class="gt_row gt_right" headers="year">2019</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<section id="converting-wide-data-to-long-format" class="level3" data-number="5.9.1"><h3 data-number="5.9.1" class="anchored" data-anchor-id="converting-wide-data-to-long-format">
<span class="header-section-number">5.9.1</span> Converting wide data to long format</h3>
<p>Wide format is quite common in official Korean data sources. Trade data is in wide format. Before using the <code>iso3c_kr</code> function, let’s first transform the trade data into a long (country-year) format to make it in the same format as the aid data. This will make joining the two datasets more feasible.</p>
<p>To convert the trade data into a long format, we will use the <code><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer()</a></code> function from the <code>tidyr</code> package.</p>
<div class="cell">
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># we will divide the trade data into export and import data</span></span>
<span></span>
<span><span class="va">export</span> <span class="op">&lt;-</span> <span class="va">kosis_trade</span> </span>
<span></span>
<span><span class="va">import</span> <span class="op">&lt;-</span> <span class="va">kosis_trade</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In <code><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer()</a></code>, we need to specify the columns that we want to pivot. In this case, we want to pivot columns 4 to 62, which are years. We also need to specify the names of the columns that will be created. In this case, we will create a column called <code>year</code> and a column called <code>export_kosis</code> for the export data. We will create a column called <code>year</code> and a column called <code>import_kosis</code> for the import data.</p>
<div class="cell">
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">export_long</span> <span class="op">&lt;-</span> <span class="va">export</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span><span class="fl">4</span><span class="op">:</span><span class="fl">62</span>, names_to <span class="op">=</span> <span class="st">"year"</span>, values_to <span class="op">=</span> <span class="st">"export_kosis"</span><span class="op">)</span> <span class="co"># we will pivot the data from wide to long format</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can rename the columns using <code>set_names</code> function in <code>rlang</code> package, which is also a member of the <code>tidyverse</code> family, to make them more informative.</p>
<div class="cell">
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">export_long</span> <span class="op">&lt;-</span> <span class="va">export_long</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rlang.r-lib.org/reference/set_names.html">set_names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"country_kr"</span>, <span class="st">"type"</span>, <span class="st">"unit"</span>, <span class="st">"year"</span>, <span class="st">"export_kosis"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can filter the data for only export data using the <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> function. We can also convert the export data from thousands of dollars to dollars by multiplying the <code>export_kosis</code> column by 1000. We can also convert the <code>year</code> column to numeric using the <code><a href="https://readr.tidyverse.org/reference/parse_number.html">parse_number()</a></code> function from the <code>readr</code> package, which is also a member of the <code>tidyverse</code> family.</p>
<div class="cell">
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">export_long</span> <span class="op">&lt;-</span> <span class="va">export_long</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"수출액[천달러]"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># we only need the export data which has the column name in Korean as "수출액[천달러]"</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>export_kosis <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">parse_number</a></span><span class="op">(</span><span class="va">export_kosis</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1000</span>, <span class="co"># we convert the export data from thousands of dollars to dollars; sometimes there are commas that make the data character instead of numeric. So we use parse_number() function from the readr package to convert character to numeric data.</span></span>
<span>         year <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">parse_number</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># we convert the year column to numeric using parse_number() function from the readr package</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">type</span>, <span class="op">-</span><span class="va">unit</span><span class="op">)</span> <span class="co"># we do not need the type and unit columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We repeat the same steps for the import data.</p>
<div class="cell">
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">import_long</span> <span class="op">&lt;-</span> <span class="va">import</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span><span class="fl">4</span><span class="op">:</span><span class="fl">62</span>, names_to <span class="op">=</span> <span class="st">"year"</span>, values_to <span class="op">=</span> <span class="st">"import_kosis"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">import_long</span> <span class="op">&lt;-</span> <span class="va">import_long</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rlang.r-lib.org/reference/set_names.html">set_names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"country_kr"</span>, <span class="st">"type"</span>, <span class="st">"unit"</span>, <span class="st">"year"</span>, <span class="st">"import_kosis"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">import_long</span> <span class="op">&lt;-</span> <span class="va">import_long</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"수입액[천달러]"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>import_kosis <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">parse_number</a></span><span class="op">(</span><span class="va">import_kosis</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1000</span>,</span>
<span>         year <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">parse_number</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">type</span>, <span class="op">-</span><span class="va">unit</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, we can join the export and import data using the <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join()</a></code> function.</p>
<div class="cell">
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">trade_long</span> <span class="op">&lt;-</span> <span class="va">export_long</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">import_long</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"country_kr"</span>, <span class="st">"year"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here, we get a warning message that there are rows that have the same country name and year in both the export and import data. It is because, KOSIS reported trade with Palestine in two separate entries (probably, West Bank and Gaza are recorded separately), but assigning both the same name “팔레스타인 해방기구”. We will ignore this warning for now.</p>
</section><section id="iso3c_kr-function-to-convert-korean-country-names-to-iso3c-country-codes" class="level3" data-number="5.9.2"><h3 data-number="5.9.2" class="anchored" data-anchor-id="iso3c_kr-function-to-convert-korean-country-names-to-iso3c-country-codes">
<span class="header-section-number">5.9.2</span> <code>iso3c_kr</code> function to convert Korean country names to iso3c country codes</h3>
<p>Using the <code>iso3c_kr</code> function, we can simply convert Korean country names into iso3c country codes. For example, the following is the output of the <code>iso3c_kr</code> function for the Korean trade data:</p>
<div class="cell">
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">trade_long</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://kdiplo.com/reference/iso3c_kr.html">iso3c_kr</a></span><span class="op">(</span><span class="va">trade_long</span>, <span class="st">"country_kr"</span><span class="op">)</span> <span class="co">#you copy paste the column name that has the Korean country names.</span></span>
<span></span>
<span><span class="va">trade_long</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">150</span>, <span class="fl">250</span>, <span class="fl">350</span>, <span class="fl">450</span>, <span class="fl">550</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">5</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span><span class="op">]</span> <span class="op">|&gt;</span> <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<div id="tlqfulkfki" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#tlqfulkfki table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#tlqfulkfki thead, #tlqfulkfki tbody, #tlqfulkfki tfoot, #tlqfulkfki tr, #tlqfulkfki td, #tlqfulkfki th {
  border-style: none;
}

#tlqfulkfki p {
  margin: 0;
  padding: 0;
}

#tlqfulkfki .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#tlqfulkfki .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#tlqfulkfki .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#tlqfulkfki .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#tlqfulkfki .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#tlqfulkfki .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tlqfulkfki .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#tlqfulkfki .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#tlqfulkfki .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#tlqfulkfki .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#tlqfulkfki .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#tlqfulkfki .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#tlqfulkfki .gt_spanner_row {
  border-bottom-style: hidden;
}

#tlqfulkfki .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#tlqfulkfki .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#tlqfulkfki .gt_from_md > :first-child {
  margin-top: 0;
}

#tlqfulkfki .gt_from_md > :last-child {
  margin-bottom: 0;
}

#tlqfulkfki .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#tlqfulkfki .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#tlqfulkfki .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#tlqfulkfki .gt_row_group_first td {
  border-top-width: 2px;
}

#tlqfulkfki .gt_row_group_first th {
  border-top-width: 2px;
}

#tlqfulkfki .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#tlqfulkfki .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#tlqfulkfki .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#tlqfulkfki .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tlqfulkfki .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#tlqfulkfki .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#tlqfulkfki .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#tlqfulkfki .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#tlqfulkfki .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tlqfulkfki .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#tlqfulkfki .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#tlqfulkfki .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#tlqfulkfki .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#tlqfulkfki .gt_left {
  text-align: left;
}

#tlqfulkfki .gt_center {
  text-align: center;
}

#tlqfulkfki .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#tlqfulkfki .gt_font_normal {
  font-weight: normal;
}

#tlqfulkfki .gt_font_bold {
  font-weight: bold;
}

#tlqfulkfki .gt_font_italic {
  font-style: italic;
}

#tlqfulkfki .gt_super {
  font-size: 65%;
}

#tlqfulkfki .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#tlqfulkfki .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#tlqfulkfki .gt_indent_1 {
  text-indent: 5px;
}

#tlqfulkfki .gt_indent_2 {
  text-indent: 10px;
}

#tlqfulkfki .gt_indent_3 {
  text-indent: 15px;
}

#tlqfulkfki .gt_indent_4 {
  text-indent: 20px;
}

#tlqfulkfki .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="header gt_col_headings">
<th id="country_kr" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">country_kr</th>
<th id="iso3c" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">iso3c</th>
<th id="year" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">year</th>
<th id="export_kosis" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">export_kosis</th>
<th id="import_kosis" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">import_kosis</th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="country_kr">계</td>
<td class="gt_row gt_left" headers="iso3c">NA</td>
<td class="gt_row gt_right" headers="year">2014</td>
<td class="gt_row gt_right" headers="export_kosis">572664607000</td>
<td class="gt_row gt_right" headers="import_kosis">525514506000</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="country_kr">아랍에미리트 연합</td>
<td class="gt_row gt_left" headers="iso3c">ARE</td>
<td class="gt_row gt_right" headers="year">1996</td>
<td class="gt_row gt_right" headers="export_kosis">1377933000</td>
<td class="gt_row gt_right" headers="import_kosis">2259205000</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="country_kr">앤티가바부다</td>
<td class="gt_row gt_left" headers="iso3c">ATG</td>
<td class="gt_row gt_right" headers="year">1978</td>
<td class="gt_row gt_right" headers="export_kosis">NA</td>
<td class="gt_row gt_right" headers="import_kosis">NA</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="country_kr">앵귈라</td>
<td class="gt_row gt_left" headers="iso3c">AIA</td>
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="export_kosis">817000</td>
<td class="gt_row gt_right" headers="import_kosis">1000</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="country_kr">아르메니아</td>
<td class="gt_row gt_left" headers="iso3c">ARM</td>
<td class="gt_row gt_right" headers="year">2001</td>
<td class="gt_row gt_right" headers="export_kosis">1255000</td>
<td class="gt_row gt_right" headers="import_kosis">43000</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="country_kr">앙골라</td>
<td class="gt_row gt_left" headers="iso3c">AGO</td>
<td class="gt_row gt_right" headers="year">1983</td>
<td class="gt_row gt_right" headers="export_kosis">235000</td>
<td class="gt_row gt_right" headers="import_kosis">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<p>We see that in this example, “계” (<em>gyae</em>) did not get any iso3c country code. This is because the <code>iso3c_kr</code> function could not find the iso3c country code for this entry. This is because, it is not a country name. “계” means total. It is best to check the data to see which entries did not get an iso3c code.</p>
<div class="cell">
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">missing_iso3c</span> <span class="op">&lt;-</span> <span class="va">trade_long</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">iso3c</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># we only need the rows that do not have iso3c country codes</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">country_kr</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># pull() function is used to extract a column as a vector</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># we need each Korean country name only once to see which ones are missing rather than having it for all years.</span></span>
<span></span>
<span><span class="va">missing_iso3c</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "계"           "국제통화기금" "기타"         "기타국"      </code></pre>
</div>
</div>
<p>They mean “total”, “IMF”, “other”, and “other countries” in Korean. In other words, we are not missing any countries, which is good.</p>
<p>Now let’s convert the Korean country names in the aid data into iso3c country codes:</p>
<div class="cell">
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">aid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://kdiplo.com/reference/iso3c_kr.html">iso3c_kr</a></span><span class="op">(</span><span class="va">aid</span>, <span class="st">"country_kr"</span><span class="op">)</span> <span class="co">#you copy paste the column name that has the Korean country names.</span></span>
<span></span>
<span><span class="va">aid</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">150</span>, <span class="fl">250</span>, <span class="fl">350</span>, <span class="fl">450</span>, <span class="fl">550</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">6</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">]</span> <span class="op">|&gt;</span> <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<div id="pezwxtctrr" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#pezwxtctrr table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#pezwxtctrr thead, #pezwxtctrr tbody, #pezwxtctrr tfoot, #pezwxtctrr tr, #pezwxtctrr td, #pezwxtctrr th {
  border-style: none;
}

#pezwxtctrr p {
  margin: 0;
  padding: 0;
}

#pezwxtctrr .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#pezwxtctrr .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#pezwxtctrr .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#pezwxtctrr .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#pezwxtctrr .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pezwxtctrr .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pezwxtctrr .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pezwxtctrr .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#pezwxtctrr .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#pezwxtctrr .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#pezwxtctrr .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#pezwxtctrr .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#pezwxtctrr .gt_spanner_row {
  border-bottom-style: hidden;
}

#pezwxtctrr .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#pezwxtctrr .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#pezwxtctrr .gt_from_md > :first-child {
  margin-top: 0;
}

#pezwxtctrr .gt_from_md > :last-child {
  margin-bottom: 0;
}

#pezwxtctrr .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#pezwxtctrr .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#pezwxtctrr .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#pezwxtctrr .gt_row_group_first td {
  border-top-width: 2px;
}

#pezwxtctrr .gt_row_group_first th {
  border-top-width: 2px;
}

#pezwxtctrr .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pezwxtctrr .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#pezwxtctrr .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#pezwxtctrr .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pezwxtctrr .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pezwxtctrr .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#pezwxtctrr .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#pezwxtctrr .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#pezwxtctrr .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pezwxtctrr .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pezwxtctrr .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#pezwxtctrr .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pezwxtctrr .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#pezwxtctrr .gt_left {
  text-align: left;
}

#pezwxtctrr .gt_center {
  text-align: center;
}

#pezwxtctrr .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#pezwxtctrr .gt_font_normal {
  font-weight: normal;
}

#pezwxtctrr .gt_font_bold {
  font-weight: bold;
}

#pezwxtctrr .gt_font_italic {
  font-style: italic;
}

#pezwxtctrr .gt_super {
  font-size: 65%;
}

#pezwxtctrr .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#pezwxtctrr .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#pezwxtctrr .gt_indent_1 {
  text-indent: 5px;
}

#pezwxtctrr .gt_indent_2 {
  text-indent: 10px;
}

#pezwxtctrr .gt_indent_3 {
  text-indent: 15px;
}

#pezwxtctrr .gt_indent_4 {
  text-indent: 20px;
}

#pezwxtctrr .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="header gt_col_headings">
<th id="country_kr" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">country_kr</th>
<th id="year" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">year</th>
<th id="sector" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">sector</th>
<th id="no_of_projects" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">no_of_projects</th>
<th id="aid_usd" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">aid_usd</th>
<th id="aid_krw" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">aid_krw</th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="country_kr">베트남</td>
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_left" headers="sector">통신정책, 계획 및 행정(voluntary code)</td>
<td class="gt_row gt_right" headers="no_of_projects">2</td>
<td class="gt_row gt_right" headers="aid_usd">232334</td>
<td class="gt_row gt_right" headers="aid_krw">270736486</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="country_kr">캄보디아</td>
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_left" headers="sector">11321</td>
<td class="gt_row gt_right" headers="no_of_projects">1</td>
<td class="gt_row gt_right" headers="aid_usd">85815</td>
<td class="gt_row gt_right" headers="aid_krw">99999361</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="country_kr">미얀마</td>
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_left" headers="sector">사회보호/보장</td>
<td class="gt_row gt_right" headers="no_of_projects">1</td>
<td class="gt_row gt_right" headers="aid_usd">103460</td>
<td class="gt_row gt_right" headers="aid_krw">120560903</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="country_kr">라오스</td>
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_left" headers="sector">비정규 농업훈련</td>
<td class="gt_row gt_right" headers="no_of_projects">1</td>
<td class="gt_row gt_right" headers="aid_usd">107958</td>
<td class="gt_row gt_right" headers="aid_krw">125802378</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="country_kr">몽골</td>
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_left" headers="sector">의료서비스</td>
<td class="gt_row gt_right" headers="no_of_projects">5</td>
<td class="gt_row gt_right" headers="aid_usd">511824</td>
<td class="gt_row gt_right" headers="aid_krw">596423389</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="country_kr">필리핀</td>
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_left" headers="sector">농업용수자원</td>
<td class="gt_row gt_right" headers="no_of_projects">2</td>
<td class="gt_row gt_right" headers="aid_usd">0</td>
<td class="gt_row gt_right" headers="aid_krw">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<p>Once you know the iso3c country codes, you can get the English country names, or other country codes (such as Correlates of War country codes) using the <code>countrycode</code> package, for example.</p>
<div class="cell">
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">trade_long</span> <span class="op">&lt;-</span> <span class="va">trade_long</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>country_name <span class="op">=</span> <span class="fu">countrycode</span><span class="fu">::</span><span class="fu"><a href="https://vincentarelbundock.github.io/countrycode/reference/countrycode.html">countrycode</a></span><span class="op">(</span><span class="va">iso3c</span>, origin <span class="op">=</span> <span class="st">"iso3c"</span>, destination <span class="op">=</span> <span class="st">"country.name"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">trade_long</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">150</span>, <span class="fl">250</span>, <span class="fl">350</span>, <span class="fl">450</span>, <span class="fl">550</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span><span class="op">]</span> <span class="op">|&gt;</span> <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<div id="vwzrjffzpc" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#vwzrjffzpc table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#vwzrjffzpc thead, #vwzrjffzpc tbody, #vwzrjffzpc tfoot, #vwzrjffzpc tr, #vwzrjffzpc td, #vwzrjffzpc th {
  border-style: none;
}

#vwzrjffzpc p {
  margin: 0;
  padding: 0;
}

#vwzrjffzpc .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#vwzrjffzpc .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#vwzrjffzpc .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#vwzrjffzpc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#vwzrjffzpc .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vwzrjffzpc .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vwzrjffzpc .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vwzrjffzpc .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#vwzrjffzpc .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#vwzrjffzpc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#vwzrjffzpc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#vwzrjffzpc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#vwzrjffzpc .gt_spanner_row {
  border-bottom-style: hidden;
}

#vwzrjffzpc .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#vwzrjffzpc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#vwzrjffzpc .gt_from_md > :first-child {
  margin-top: 0;
}

#vwzrjffzpc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#vwzrjffzpc .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#vwzrjffzpc .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#vwzrjffzpc .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#vwzrjffzpc .gt_row_group_first td {
  border-top-width: 2px;
}

#vwzrjffzpc .gt_row_group_first th {
  border-top-width: 2px;
}

#vwzrjffzpc .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vwzrjffzpc .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#vwzrjffzpc .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#vwzrjffzpc .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vwzrjffzpc .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vwzrjffzpc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#vwzrjffzpc .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#vwzrjffzpc .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#vwzrjffzpc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vwzrjffzpc .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vwzrjffzpc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vwzrjffzpc .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vwzrjffzpc .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vwzrjffzpc .gt_left {
  text-align: left;
}

#vwzrjffzpc .gt_center {
  text-align: center;
}

#vwzrjffzpc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#vwzrjffzpc .gt_font_normal {
  font-weight: normal;
}

#vwzrjffzpc .gt_font_bold {
  font-weight: bold;
}

#vwzrjffzpc .gt_font_italic {
  font-style: italic;
}

#vwzrjffzpc .gt_super {
  font-size: 65%;
}

#vwzrjffzpc .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#vwzrjffzpc .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#vwzrjffzpc .gt_indent_1 {
  text-indent: 5px;
}

#vwzrjffzpc .gt_indent_2 {
  text-indent: 10px;
}

#vwzrjffzpc .gt_indent_3 {
  text-indent: 15px;
}

#vwzrjffzpc .gt_indent_4 {
  text-indent: 20px;
}

#vwzrjffzpc .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="header gt_col_headings">
<th id="country_kr" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">country_kr</th>
<th id="iso3c" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">iso3c</th>
<th id="country_name" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">country_name</th>
<th id="year" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">year</th>
<th id="export_kosis" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">export_kosis</th>
<th id="import_kosis" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">import_kosis</th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="country_kr">계</td>
<td class="gt_row gt_left" headers="iso3c">NA</td>
<td class="gt_row gt_left" headers="country_name">NA</td>
<td class="gt_row gt_right" headers="year">2014</td>
<td class="gt_row gt_right" headers="export_kosis">572664607000</td>
<td class="gt_row gt_right" headers="import_kosis">525514506000</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="country_kr">아랍에미리트 연합</td>
<td class="gt_row gt_left" headers="iso3c">ARE</td>
<td class="gt_row gt_left" headers="country_name">United Arab Emirates</td>
<td class="gt_row gt_right" headers="year">1996</td>
<td class="gt_row gt_right" headers="export_kosis">1377933000</td>
<td class="gt_row gt_right" headers="import_kosis">2259205000</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="country_kr">앤티가바부다</td>
<td class="gt_row gt_left" headers="iso3c">ATG</td>
<td class="gt_row gt_left" headers="country_name">Antigua &amp; Barbuda</td>
<td class="gt_row gt_right" headers="year">1978</td>
<td class="gt_row gt_right" headers="export_kosis">NA</td>
<td class="gt_row gt_right" headers="import_kosis">NA</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="country_kr">앵귈라</td>
<td class="gt_row gt_left" headers="iso3c">AIA</td>
<td class="gt_row gt_left" headers="country_name">Anguilla</td>
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="export_kosis">817000</td>
<td class="gt_row gt_right" headers="import_kosis">1000</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="country_kr">아르메니아</td>
<td class="gt_row gt_left" headers="iso3c">ARM</td>
<td class="gt_row gt_left" headers="country_name">Armenia</td>
<td class="gt_row gt_right" headers="year">2001</td>
<td class="gt_row gt_right" headers="export_kosis">1255000</td>
<td class="gt_row gt_right" headers="import_kosis">43000</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="country_kr">앙골라</td>
<td class="gt_row gt_left" headers="iso3c">AGO</td>
<td class="gt_row gt_left" headers="country_name">Angola</td>
<td class="gt_row gt_right" headers="year">1983</td>
<td class="gt_row gt_right" headers="export_kosis">235000</td>
<td class="gt_row gt_right" headers="import_kosis">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<p>More importantly, <code>iso3c_kr</code> function allows users to be able to join different datasets that have Korean country names. For example, one can join the trade data with the aid data using the iso3c country codes. In this example, I will join the trade data with the aid data using the iso3c country codes.</p>
<div class="cell">
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">trade_aid</span> <span class="op">&lt;-</span> <span class="va">trade_long</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">aid</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"iso3c"</span>, <span class="st">"year"</span><span class="op">)</span>, suffix <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"_trade"</span>, <span class="st">"_aid"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">trade_aid</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2019</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">iso3c</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># just as a sample, we only need the data for 2019 and we exclude the rows that do not have iso3c country codes</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">30</span>, <span class="fl">130</span>, <span class="fl">230</span>, <span class="fl">330</span>, <span class="fl">430</span>, <span class="fl">530</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># just as a sample, let's only look at the rows 30, 130, 230, 330, 430, and 530</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">iso3c</span>, <span class="va">country_kr_trade</span>, <span class="va">country_kr_aid</span>, <span class="va">year</span>, <span class="va">export_kosis</span>, <span class="va">import_kosis</span>, <span class="va">aid_usd</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># just as a sample, let's only look at the columns that we are interested in</span></span>
<span>  <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<div id="acrcnvtxup" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#acrcnvtxup table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#acrcnvtxup thead, #acrcnvtxup tbody, #acrcnvtxup tfoot, #acrcnvtxup tr, #acrcnvtxup td, #acrcnvtxup th {
  border-style: none;
}

#acrcnvtxup p {
  margin: 0;
  padding: 0;
}

#acrcnvtxup .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#acrcnvtxup .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#acrcnvtxup .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#acrcnvtxup .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#acrcnvtxup .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#acrcnvtxup .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#acrcnvtxup .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#acrcnvtxup .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#acrcnvtxup .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#acrcnvtxup .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#acrcnvtxup .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#acrcnvtxup .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#acrcnvtxup .gt_spanner_row {
  border-bottom-style: hidden;
}

#acrcnvtxup .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#acrcnvtxup .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#acrcnvtxup .gt_from_md > :first-child {
  margin-top: 0;
}

#acrcnvtxup .gt_from_md > :last-child {
  margin-bottom: 0;
}

#acrcnvtxup .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#acrcnvtxup .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#acrcnvtxup .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#acrcnvtxup .gt_row_group_first td {
  border-top-width: 2px;
}

#acrcnvtxup .gt_row_group_first th {
  border-top-width: 2px;
}

#acrcnvtxup .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#acrcnvtxup .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#acrcnvtxup .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#acrcnvtxup .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#acrcnvtxup .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#acrcnvtxup .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#acrcnvtxup .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#acrcnvtxup .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#acrcnvtxup .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#acrcnvtxup .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#acrcnvtxup .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#acrcnvtxup .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#acrcnvtxup .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#acrcnvtxup .gt_left {
  text-align: left;
}

#acrcnvtxup .gt_center {
  text-align: center;
}

#acrcnvtxup .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#acrcnvtxup .gt_font_normal {
  font-weight: normal;
}

#acrcnvtxup .gt_font_bold {
  font-weight: bold;
}

#acrcnvtxup .gt_font_italic {
  font-style: italic;
}

#acrcnvtxup .gt_super {
  font-size: 65%;
}

#acrcnvtxup .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#acrcnvtxup .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#acrcnvtxup .gt_indent_1 {
  text-indent: 5px;
}

#acrcnvtxup .gt_indent_2 {
  text-indent: 10px;
}

#acrcnvtxup .gt_indent_3 {
  text-indent: 15px;
}

#acrcnvtxup .gt_indent_4 {
  text-indent: 20px;
}

#acrcnvtxup .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="header gt_col_headings">
<th id="iso3c" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">iso3c</th>
<th id="country_kr_trade" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">country_kr_trade</th>
<th id="country_kr_aid" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">country_kr_aid</th>
<th id="year" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">year</th>
<th id="export_kosis" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">export_kosis</th>
<th id="import_kosis" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">import_kosis</th>
<th id="aid_usd" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">aid_usd</th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="iso3c">AFG</td>
<td class="gt_row gt_left" headers="country_kr_trade">아프가니스탄</td>
<td class="gt_row gt_left" headers="country_kr_aid">아프가니스탄</td>
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="export_kosis">49930000</td>
<td class="gt_row gt_right" headers="import_kosis">38000</td>
<td class="gt_row gt_right" headers="aid_usd">6081</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="iso3c">BGD</td>
<td class="gt_row gt_left" headers="country_kr_trade">방글라데시</td>
<td class="gt_row gt_left" headers="country_kr_aid">방글라데시</td>
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="export_kosis">1282342000</td>
<td class="gt_row gt_right" headers="import_kosis">404703000</td>
<td class="gt_row gt_right" headers="aid_usd">746593</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="iso3c">BOL</td>
<td class="gt_row gt_left" headers="country_kr_trade">볼리비아</td>
<td class="gt_row gt_left" headers="country_kr_aid">볼리비아</td>
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="export_kosis">30434000</td>
<td class="gt_row gt_right" headers="import_kosis">450576000</td>
<td class="gt_row gt_right" headers="aid_usd">535262</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="iso3c">COD</td>
<td class="gt_row gt_left" headers="country_kr_trade">콩고 민주공화국</td>
<td class="gt_row gt_left" headers="country_kr_aid">콩고민주공화국(DR콩고)</td>
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="export_kosis">37083000</td>
<td class="gt_row gt_right" headers="import_kosis">411274000</td>
<td class="gt_row gt_right" headers="aid_usd">0</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="iso3c">CHN</td>
<td class="gt_row gt_left" headers="country_kr_trade">중국</td>
<td class="gt_row gt_left" headers="country_kr_aid">중국</td>
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="export_kosis">136202533000</td>
<td class="gt_row gt_right" headers="import_kosis">107228736000</td>
<td class="gt_row gt_right" headers="aid_usd">0</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="iso3c">DOM</td>
<td class="gt_row gt_left" headers="country_kr_trade">도미니카 공화국</td>
<td class="gt_row gt_left" headers="country_kr_aid">도미니카공화국</td>
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="export_kosis">252420000</td>
<td class="gt_row gt_right" headers="import_kosis">88516000</td>
<td class="gt_row gt_right" headers="aid_usd">25792</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<p>Voilà! Now we have a dataset that has both trade and aid data, both of which originally did not have consistent country names or country codes. If we only used <code>country_kr</code> column to join the two datasets, we would have failed to merge all the data, such as “콩고 민주공화국” and “콩고민주공화국(DR콩고)”, both of which are Democratic Republic of the Congo; or “도미니카 공화국” and “도미니카공화국” (Dominican Republic) which merelt have a space difference between the words. But with the <code>iso3c_kr</code> function, we were able to merge the two datasets successfully.</p>
</section></section><section id="working-with-dates" class="level2" data-number="5.10"><h2 data-number="5.10" class="anchored" data-anchor-id="working-with-dates">
<span class="header-section-number">5.10</span> Working with dates</h2>
<p><em>To be added</em></p>
</section><section id="regular-expressions" class="level2" data-number="5.11"><h2 data-number="5.11" class="anchored" data-anchor-id="regular-expressions">
<span class="header-section-number">5.11</span> Regular expressions</h2>
<p><em>To be added</em></p>


</section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><hr>
<ol>
<li id="fn1"><p>This subsection is adapted from the <a href="https://kdiplo.com/articles/iso3c_kr-vignette">vignette</a> of the <code>iso3c_kr</code> function in the <code>kdiplo</code> package.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/r4ks\.com");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./basics.html" class="pagination-link" aria-label="The Basics of R">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">The Basics of R</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./visuals-tables.html" class="pagination-link" aria-label="Data Visualization: Tables">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Data Visualization: Tables</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>© 2024 <a href="https://ayhan.phd">Kadir Jun Ayhan</a> &amp; <a href="https://k-a.phd">K-Analytics</a> - <a href="https://www.linkedin.com/company/k-a-phd/">Linkedin</a> - <a href="mailto:k@ayhan.phd">Email</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>Written with <a href="https://quarto.org/">Quarto</a> - Source code on <a href="https://github.com/kjayhan/R4KS">GitHub</a></p>
</div>
  </div>
</footer>


</body></html>